{
  "name": "Nagios",
  "tagline": "Trabalho do tio Lu sobre o Nagios",
  "body": "# Instalando Nagios 4.1.1 #\r\n\r\nTutorial baseado no seguinte [post](http://www.unixmen.com/how-to-install-nagios-core-4-1-1-in-ubuntu-15-10/).\r\n\r\n> Nagios é sistema, que pode ser usado para monitoramento de infra-estrutura de rede. Usando Nagios, podemos >monitorar servidores, switches, aplicações e serviços etc. Alerta o administrador do sistema quando algo der :errado e também alertas quando esses erros tenham sido corrigidos.\r\n\r\n## Funcionaliades ###\r\n\r\n- Monitorar toda sua infraestrutura de ti.\r\n- Identify problems before they occur.\r\n- Identificar problemas antes que eles aconteçam\r\n- Saber imediatamente quando problemas surgirem\r\n- Compartilhar dados de disponibilidade com as partes interessadas\r\n- Detectar violações de segurança\r\n- Planos e orçamento para upgrades de TE.\r\n- Reduza as perdas de tempo de inatividade e negócios.\r\n\r\n## Pré-requisitos ###\r\n\r\n**Para facilitar os passos a seguir execute-os em modo *root*.**\r\n\r\nAtualizar o servidor\r\n  \r\n\tapt-get update  \r\n\tapt-get upgrade \r\n\r\nInstale as dependências do nagios\r\n\r\n\tapt-get install libgd2-xpm-dev libsnmp-perl libssl-dev openssl build-essential apache2 libapache2-mod-php5\r\n\r\nCrie um novo usuário do ***nagios***\r\n\r\n\tuseradd nagios -g nagios\r\n\tpasswd nagios\r\n\r\nCrie um novo grupo de ***nagcmd*** para permitir que comandos externos sejam enviados através da interface web. Adicione o usuário nagios e o usuário do apache ao grupo.\r\n\r\n\tsudo groupadd nagcmd\r\n\tsudo usermod -a -G nagcmd nagios\r\n\tsudo usermod -a -G nagcmd www-data\t\r\n\r\n\r\n## Baixar o Nagios e Plugins ##\r\n\r\nCrie um diretório para armazenar os downloads\r\n\r\n\tmkdir /usr/src/nagios\r\n\tcd /usr/src/nagios\r\n\r\nVá para a página do [Nagios](https://www.nagios.org/downloads/nagios-core/thanks/?t=1466426447) para obter a versão mais recente, a versão mais recente durante a escrita desse documento é a 4.1.1\r\n\r\n\twget https://assets.nagios.com/downloads/nagioscore/releases/nagios-4.1.1.tar.gz\r\n\r\nE, baixe também os [plugins](https://www.nagios.org/downloads/nagios-plugins/) do nagios\r\n\r\n\twget http://www.nagios-plugins.org/download/nagios-plugins-2.1.1.tar.gz\r\n\r\n## Instalar Nagios e Plugins ##\r\n\r\n### Instalar Nagios ###\r\n\r\nVa até a pasta onde baixou o nagios, e extraia os arquivos:\r\n\r\n\ttar xzf nagios-4.1.1.tar.gz\r\n\r\nAcesse o diretório extraído:\r\n\r\n\tcd nagios-4.1.1/\r\n\r\n\r\nExecute os seguintes comandos um a um para compilar e instalar o nagios.\r\n\r\n\t./configure --with-command-group=nagcmd\r\n\tmake all\r\n\tmake install\r\n\tmake install-init\r\n\tmake install-config\r\n\tmake install-commandmode\r\n\r\n### Instalar a interface web do Nagios ###\r\n\r\nExecute o seguinte comando para compilar e instalar a interface web.\r\n\r\n\tmake install-webconf\r\n\r\nCaso o seguinte erro ocorra: \r\n> /usr/bin/install -c -m 644 sample-config/httpd.conf /etc/httpd/conf.d/nagios.conf\r\n> /usr/bin/install: cannot create regular file ‘/etc/httpd/conf.d/nagios.conf’: No such file or directory\r\n> Makefile:296: recipe for target 'install-webconf' failed\r\n> make: *** [install-webconf] Error 1\r\n\r\nA mensagem de erro a cima descreve que o nagios está tentando criar o arquivo **nagios.conf** dentro do diretório **/etc/httpd.conf/ **. Mas em sistemas derivados do Ubuntu o **nagios.conf** deve ser colocado no diretório /etc/apache2/sites-enabled/\r\n\r\nPara tal, execute o seguinte comando no lugar do **make install-webconf**.\r\n\r\n\tsudo /usr/bin/install -c -m 644 sample-config/httpd.conf /etc/apache2/sites-enabled/nagios.conf\r\n\r\nVerifique se o **nagios.conf** está no diretório /etc/apache2/sites-enabled.\r\n\r\n\tsudo ls -l /etc/apache2/sites-enabled/\r\n\r\nO output desse comando deve ser semelhante a:\r\n\r\n>total 4  \r\nlrwxrwxrwx 1 root root 35 Nov 28 16:49 000-default.conf -../sites-available/000-default.conf   \r\n-rw-r--r-- 1 root root 1679 Nov 28 17:02 nagios.conf \r\n\r\nCrie um conta ***nagiosadmin*** para se autenticar a interface web do Nagios. **Lembre da senha que você definir**, ela será utilizada para logar na interface web.\r\n\r\n\thtpasswd -c /usr/local/nagios/etc/htpasswd.users nagiosadmin\r\n\r\nReinicie o Apache para que as novas configurações tenham efeito.\r\n\r\n\tservice apache2 restart\r\n\r\n### Instalar Nagios Plugins ###\r\n\r\nVa para o diretório onde você baixou o nagios plugins, e extraia os arquivos.\r\n\r\n\ttar xzf nagios-plugins-2.1.1.tar.gz\r\n\r\nAcesse o diretório extraído:\r\n\r\n\tcd / nagios-plugins-2.1.1/\r\n\r\nExecute os seguintes comandos um a um para compilar e instalar.\r\n\r\n\t./configure --with-nagios-user=nagios --with-nagios-group=nagios\r\n\tmake\r\n\tmake install\r\n\r\n## Configurar o nagios ##\r\n\r\nOs arquivos com configurações de exemplo do Nagios estão localizados no diretório **/usr/local/nagios/etc**.Esses arquivos de exemplo devem funcionar bem para uma introdução ao Nagios. No entando, se você quiser, precisará colocar o seu ID e e-mail para receber alertas.\r\n\r\nPara tal, edite o arquivo de configuração **/usr/local/nagios/etc/objects/contacts.cfg** e altere o e-mail associado a contato *nagiosadmin* este e-mail será onde os alertas serão enviados\r\n\r\n\tnano /usr/local/nagios/etc/objects/contacts.cfg\r\n\r\nEncontre a linha a seguir e informe o seu e-mail:\r\n \r\n\t [...]  \r\n\t define contact {  \r\n\t contact_name                    nagiosadmin             ; Short name of user  \r\n\t use                             generic-contact         ; Inherit default values from generic-contact template (defined above)    \r\n\t alias                           Nagios Admin            ; Full name of user   \r\n\t email                           seuemailaqui.com    \t ; <<CHANGE THIS TO YOUR EMAIL ADDRESS\r\n\t }  \r\n\t [...]\r\n\r\nSave and close the file.\r\n\r\nEntão, edite o arquivo **/etc/apache2/sites-enabled/nagios-conf**\r\n\r\n\tnano /etc/apache2/sites-enabled/nagios.conf\r\n\r\nE edite as seguintes linhas, se você desejar acessar o nagios console administrativo de uma determinada\r\n faixa de IP.\r\n\r\n\t[...]\r\n\t## Comment the following lines \r\n\t#   Order allow,deny\r\n\t#   Allow from all\r\n\t\r\n\t## Uncomment and Change lines as shown below\r\n\tOrder deny,allow\r\n\tDeny from all\r\n\tAllow from 127.0.0.1 192.168.1.0/24 #seu ip vai aqui\r\n\t[...]\r\n\r\nHabilitar os módulos do Apache e reconfiguração e cgi\r\n\r\n\ta2enmod rewrite\r\n\ta2enmod cgi\r\n\r\nReiniciar o serviço Apache\r\n\t\r\n\tservice apache2 restart\r\n\r\nVerifique se o arquivo **nagios.cfg** contém algum erro de sintaxe:\r\n\r\n\t/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg\r\n\r\nCaso o comando a cima não tenha apontado erros, podemos iniciar o serviço nagios: \r\n\r\n\tservice nagios start\r\n\r\n## Acessar a interface web do Nagios ##\r\n\r\nAbra seu navegador da web e navegue até **http://{ip-do-server-nagios}/nagios** e digite o nome de usuário como **nagiosadmin** e sua senha que criamos nos passos anteriores.\r\n\r\n![](http://www.unixmen.com/wp-content/uploads/2015/11/192.168.1.103-nagios-Google-Chrome_001.jpg)\r\n\r\nAqui esta um exemplo da página de administração do Nagios:\r\n\r\n![](http://www.unixmen.com/wp-content/uploads/2015/11/Nagios-Core-Google-Chrome_002.jpg)\r\n\r\nClique na seção de \"Hosts\" no painel esquerdo. Você verá os hosts que estão sendo monitorados pelo servidor Nagios. Nós ainda não adicionou nenhum host. Então ele simplesmente monitora o localhost apenas.\r\n\r\n![](http://www.unixmen.com/wp-content/uploads/2015/11/Nagios-Core-Google-Chrome_003.jpg)\r\n\r\nClique no *localhost* para exibir mais detalhes\r\n\r\n![](http://www.unixmen.com/wp-content/uploads/2015/11/Nagios-Core-Google-Chrome_004.jpg)\r\n\r\n\r\nÉ isso, instalamos e configuramos o Nagios! ",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}